<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>
		Vue js
	</title>
	<style type="text/css">
		input{
			background-color: gray;
		}
	</style>
</head>
<body>
	
	<div id="main">

		<h2>
			Acceso
		</h2>
		
		<form @submit.prevent="onSubmit" v-if="!access">
			<fieldset>
				<label>
					Correo: 
				</label>
				<input v-model="email" type="email"  placeholder="write Here" required name="">
			</fieldset>

			<fieldset>
				<label>
					Password: 
				</label>
				<input v-model="password"  placeholder="write Here" type="password" required name="">
			</fieldset>

			<button type="submit">
				Acceder
			</button>
		
		</form>

		<div v-if="access">
			
			<h1>
				Bienvenido al sistema
			</h1>

		</div>

	</div>

	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script>
	  const { createApp, ref } = Vue

	  createApp({
	    
	    setup() {

	      
	      let email = ref('') 
	      let password = ref('') 
	      let access = ref(false)
	      
	      return { 
	        email,
	        password,
	        access
	      }
	    },

	    methods: { 
	    	
	    	onSubmit()
	    	{
	    		console.log(this.email) 
	    		console.log(this.password)  

	    		fetch('users.json',) 
	    		.then(res=>res.json())
	    		.then((response) => { 

				    response.forEach((e) => {

				    	if (e.email==this.email) {
				    		if(e.password == this.password){

				    			console.log("Login")
				    			this.access = true
				    		}
				    	}

				    });

				    if (!this.access) {
				    	alert("Verifique su informaciÃ³n")
				    }


				 })
	    		.catch((error) => {
				    
	    			alert("Ha ocurrido un error")

				});
	    	}
	    }

	  }).mount('#main')
	</script>
</body>
</html>
















